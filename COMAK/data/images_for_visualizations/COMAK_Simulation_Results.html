<html>
<head>
<title>What is COMAK?</title>
<style>
body { font-family: Arial, sans-serif; margin: 0; background-color: #e0e0e0; }
nav { background-color: #333; position: fixed; top: 0; width: 100%; }
nav a { color: white; text-decoration: none; display: inline-block; padding: 10px; }
nav a.mean-result-page { background-color: #fff; color: #8B0000; }
nav a:hover { background-color: #ddd; color: black; }
nav a.main-page { background-color: #fff; color: #8B0000; }
nav select { margin-left: 10px; padding: 5px; }
section { padding: 20px 20px 20px 40px; margin: 30px 0; border-radius: 8px; background-color: white; }
p, h1, h2, h3, h4, h5, h6 { margin-left: 0; }
.image-container { text-align: center; margin-top: 20px; }
</style>
<script>
function goToPatientReport() {
  var select = document.getElementById("patientSelect");
  var selectedValue = select.options[select.selectedIndex].value;
  if (selectedValue) {
    window.location.href = selectedValue;
  }
}
</script>
</head>
<body>
<nav>
  <a href="#introduction">Introduction</a>
  <a href="#components">Components and Models</a>
  <a href="#workflow">Workflow</a>
  <a href="#validation">Validation and Applications</a>
<a href="#How_to_Use_COMAK">How to Use COMAK</a>
<a href="#Conclusion">Conclusion</a>
  <a href="mean_results.html" class="mean-result-page">Mean Simulation Results</a>
<select id="patientSelect" onchange="goToPatientReport()">
<option value="">Select Patient</option>
<option value="STRATO_003_results.html">STRATO_003</option>
<option value="STRATO_004_results.html">STRATO_004</option>

</select>
</nav>
nav a.main-page { background-color: #fff; color: #8B0000; }
<div style="text-align:center; padding-top: 70px; padding-bottom: 20px; background-color: #8B0000; color: white; border-bottom: 2px solid #ccc;">
<h1 style="margin: 0; font-size: 2.5em;">What is COMAK?</h1>
</div>
<section id="introduction">
<h2 style="font-size: 2em; color: #333; margin-bottom: 10px;">Introduction to COMAK</h2>
<p>Concurrent Optimization of Muscle Activations and Kinematics (COMAK) is a sophisticated computational approach integrated into the OpenSim-Joint Articular Mechanics (JAM) toolkit. It is designed to enhance the fidelity of musculoskeletal (MSK) simulations by concurrently optimizing muscle activations and joint kinematics. This approach is particularly valuable for studying dynamic joint mechanics, such as those involved in walking, and has applications in understanding and treating knee osteoarthritis (KOA).</p>
<div class="image-container">
<img src="../data/images_for_visualizations/COMAK_workflow.png" alt="COMAK Workflow" style="max-width:100%; height:auto;">
</div>
</section>
<section id="components">
<h2 style="font-size: 2em; color: #333; margin-bottom: 10px;">Components and Models</h2>
<p>OpenSim JAM incorporates various force component plugins, models, and simulation tools to accurately represent joint mechanics:</p>
<ul>
<li><b>Blankevoort1991Ligament:</b> Simulates ligament behavior using a spring-damper model, capturing both the nonlinear and linear response of ligament fibers.</li>
<li><b>Smith2018ArticularContactForce and Smith2018ContactMesh:</b> Represents articular contact using triangular mesh geometries and an elastic foundation model to calculate contact pressures.</li>
</ul>
<p><b>Models:</b></p>
<ul>
<li><b>Lenhart2015 Model:</b> This model includes detailed representations of the tibiofemoral and patellofemoral joints as 6-degree-of-freedom (DOF) joints, utilizing the Smith2018ArticularContactForce for cartilage contact and Blankevoort1991Ligaments for ligaments.</li>
</ul>
<p><b>Simulation Tools:</b></p>
<ul>
<li><b>COMAKInverseKinematics and COMAK:</b> These tools implement the COMAK algorithm to calculate muscle forces and detailed joint mechanics during dynamic movements.</li>
<li><b>JointMechanicsTool:</b> Enables detailed analysis of joint mechanics simulations, generating files for visualization and further analysis in MATLAB, Python, or HDF View.</li>
</ul>
</section>
<section id="workflow">
<h2 style="font-size: 2em; color: #333; margin-bottom: 10px;">COMAK Workflow</h2>
<ol>
<li><b>Knee Model Construction:</b> Develop a personalized knee model based on imaging data, integrated with a comprehensive MSK model that includes bones, muscles, and ligaments.</li>
<li><b>Data Collection:</b> Gather experimental data through gait analysis, tracking marker trajectories and measuring ground reaction forces.</li>
<li><b>Inverse Kinematics:</b> Use the collected data to compute primary joint angles and movements using inverse kinematics algorithms.</li>
<li><b>Prescribed Flexion Forward Simulation:</b> Conduct a forward simulation with prescribed joint flexion to estimate initial secondary kinematic variables.</li>
<li><b>Initialization Forward Simulation:</b> Refine secondary kinematic variables through an initialization simulation, preparing for the optimization process.</li>
<li><b>Optimization:</b> Apply the COMAK algorithm to concurrently optimize muscle activations and secondary kinematics. The goal is to minimize the sum of weighted muscle activations squared while ensuring that predicted kinematics closely match observed data. COMAK predicts secondary coordinates based on model parameters and estimated muscle and ligament forces, considering muscle forces, ligament forces, joint geometry, and gravity for more realistic joint contact forces.</li>
<li><b>Monte Carlo Neuromuscular Coordination (Optional):</b> Execute high-throughput computing simulations to generate probabilistic predictions of knee mechanics over multiple gait cycles.</li>
<li><b>Output Analysis:</b> The optimized outputs include knee kinematics, muscle activations, and joint contact forces, which are crucial for understanding the mechanical environment of the knee joint.</li>
</ol>
</section>
<section id="validation">
<h2 style="font-size: 2em; color: #333; margin-bottom: 10px;">Validation and Applications</h2>
<ul>
<li><b>Proof of Concept:</b> Mohout et al., 2023, demonstrated the proof of concept for this approach.</li>
<li><b>Validation of Kinematics:</b> The kinematics of the model were validated by comparing simulation outputs with observed joint angles during walking.</li>
<li><b>Validation of Dynamics:</b> Muscle activations predicted by the model were compared with electromyography (EMG) data, showing good agreement.</li>
<li><b>Reproducibility:</b> The reproducibility of results was tested using different trials of a patient, showing consistent outputs.</li>
<li><b>Sensitivity Analysis:</b> A sensitivity analysis is planned to evaluate the influence of subject-specific loading and boundary conditions, using a statistical shape model to assess sensitivity to geometry, alignment, cartilage thickness, and other factors.</li>
<li><b>Uncertainty:</b> Identifying uncertainty is challenging due to unknowns in many input parameters.</li>
<li><b>Generalizability:</b> Testing the generalizability of the workflow with other independent datasets and instrumented patients for validation is planned but not yet completed.</li>
<li><b>Forward Dynamic Simulation:</b> The output of COMAK can be used to drive forward dynamic simulations for further analysis.</li>
</ul>
</section>
<section id="How_to_Use_COMAK">
<h2>How to Use COMAK</h2>
<p>To use the COMAK tool, follow these steps:</p>
<ol>
<li>Prepare your musculoskeletal model in OpenSim.</li>
<li>Set up the COMAK tool and configure the necessary settings.</li>
<li>Run the COMAK simulation to compute joint contact mechanics.</li>
<li>Analyze the results, which include joint contact pressures, muscle activations, and reserve actuator forces.</li>
</ol>
</section>
<section id="Conclusion">
<h2>Conclusion</h2>
<p>The COMAK simulation workflow provides detailed insights into joint contact mechanics and muscle activations. The results presented in this report can be used to further understand the biomechanics of knee osteoarthritis and to inform clinical decisions.</p>
</section>
</body>
</html>